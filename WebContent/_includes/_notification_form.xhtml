<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core">

	<h:form>
		<p:poll interval="60"
			listener="#{notificationBean.initNotifications()}"
			update=":notification-form" widgetVar="mypollwv" autoStart="false" />
	</h:form>
	<script type="text/javascript">	
			$(window).on("blur focus", function(e) {
		    	var prevType = $(this).data("prevType");
		    	if (prevType != e.type) {   //  reduce double fire issues
		        	switch (e.type) {
		            	case "blur":
		            		PF('mypollwv').stop();
		                	break;
		            	case "focus":
			            	PF('mypollwv').start();
		                	break;
		        	}
		    	}
		    	$(this).data("prevType", e.type);
		    });
	</script>


</ui:composition>